"use strict";(self.webpackChunkreact_webpack_setup=self.webpackChunkreact_webpack_setup||[]).push([[179],{9189:(e,t,n)=>{n.d(t,{Z:()=>m});var r=n(5861),a=n(7757),o=n.n(a),c=n(9669),l=n.n(c),s="https://test-quiz-app-asdf.herokuapp.com/api/",i=l().create({baseURL:s,timeout:5e3,headers:{Authorization:localStorage.getItem("access")?"Bearer "+localStorage.getItem("access"):null,"Content-type":"application/json"}});i.interceptors.response.use((function(e){return e}),function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.response){e.next=5;break}return alert("Server is down."),e.abrupt("return",Promise.reject(t));case 5:if(403!==t.response.status){e.next=9;break}return e.abrupt("return",Promise.reject(t));case 9:if(401===t.response.status){e.next=11;break}return e.abrupt("return",Promise.reject(t));case 11:if(localStorage.getItem("refresh")){e.next=13;break}return e.abrupt("return",Promise.reject(t));case 13:return e.abrupt("return",l().post(s+"token/refresh/",{refresh:localStorage.getItem("refresh")}).then((function(e){var n=e.data.access;return i.defaults.headers.Authorization="Bearer ".concat(n),localStorage.setItem("access",n),t.response.config.headers.Authorization="Bearer ".concat(n),l()(t.response.config)})).catch((function(e){return 400===e.response.status||404===e.response.status||console.log("logged out."),Promise.reject(e)})));case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());const u=i;const m={login:function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post("token/",t).then((function(e){var t=e.data.access;return u.defaults.headers.Authorization="Bearer ".concat(t),e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),registerUser:function(){var e=(0,r.Z)(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.post("user/register/",t).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),currentUserData:function(){return u.get("user/details/").then((function(e){return e.data}))},allNotTakenQuiz:function(){return u.get("quiz/all/").then((function(e){return e.data}))},getQuizContent:function(e){return u.get("quiz/start/".concat(e,"/")).then((function(e){return e.data}))},submitQuiz:function(e){var t=e.slug,n=e.answers;return u.post("quiz/start/".concat(t,"/"),n).then((function(e){return e.data}))},quizResults:function(){return u.get("quiz/taken/").then((function(e){return e.data}))}}},4989:(e,t,n)=>{n.d(t,{H:()=>h,E:()=>g});var r=n(7462),a=n(4942),o=n(8152),c=n(7294),l=n(7281),s=n(8767),i=n(9189),u=n(1002);const m={setMultiple:function(e){Object.entries(e).map((function(e){var t=e[0].toString(),n=e[1].toString();localStorage.setItem(t,n)}))},set:function(e,t){e&&t&&("object"===(0,u.Z)(t)&&(t=JSON.stringify(t)),localStorage.setItem(e,t))},get:function(e){var t=localStorage.getItem(e);if(t)return"{"===t[0]&&(t=JSON.parse(t)),t},remove:function(e){"object"!==(0,u.Z)(e)?localStorage.removeItem(e):e.map((function(e){localStorage.removeItem(e)}))}};function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=(0,c.createContext)({}),h=function(e){var t=(0,c.useState)({role:m.get(m.get("refresh"))?m.get(m.get("refresh")).role:l.u.NONE,authenticated:!!m.get(m.get("refresh"))&&m.get(m.get("refresh")).authenticated}),n=(0,o.Z)(t,2),a=n[0],u=n[1],f=(0,s.useMutation)(i.Z.login,{onSuccess:function(e){var t=e.data,n=t.access,r=t.refresh,o=t.role,c=l.u.NONE;l.u.checkByNumber(o)!==l.u.NONE?(c=l.u.checkByNumber(o),m.setMultiple({access:n,refresh:r}),u({role:c,authenticated:!0}),m.set(r,{role:c,authenticated:!0})):u(p(p({},a),{},{role:l.u.INVALID}))}}),h=f.isLoading,g=f.isError,E=f.mutate,v=p(p({login:function(e){u(p(p({},a),{},{role:l.u.NONE})),E(e)},logout:function(){m.remove([m.get("refresh"),"access","refresh"]),u({role:l.u.NONE,authenticated:!1})},isLoading:h,isError:g},a),{},{setAuthDetails:u});return c.createElement(d.Provider,(0,r.Z)({value:v},e))},g=function(){return(0,c.useContext)(d)}},7281:(e,t,n)=>{n.d(t,{u:()=>r});var r={TEACHER:"TEACHER",STUDENT:"STUDENT",PUBLIC:"PUBLIC",NONE:"NONE",INVALID:"INVALID",checkByNumber:function(e){var t=r.NONE;return 1===e?t=r.TEACHER:2===e&&(t=r.STUDENT),t}}},8524:(e,t,n)=>{var r=n(7294),a=n(3935),o=n(3727),c=n(6550),l=n(7281),s=[{name:"Dashboard",path:"/admin",component:(0,r.lazy)((function(){return Promise.all([n.e(568),n.e(855)]).then(n.bind(n,7855))})),role:l.u.TEACHER,display:!0},{name:"Quiz",path:"/admin/quiz",component:(0,r.lazy)((function(){return Promise.all([n.e(568),n.e(192)]).then(n.bind(n,7192))})),role:l.u.TEACHER,display:!0}],i=[{name:"Home",path:"/",component:(0,r.lazy)((function(){return Promise.all([n.e(220),n.e(787)]).then(n.bind(n,5787))})),role:l.u.STUDENT,display:!0},{name:"Quiz",path:"/quiz/:slug",component:(0,r.lazy)((function(){return Promise.all([n.e(220),n.e(738)]).then(n.bind(n,738))})),role:l.u.STUDENT,display:!1}],u=[].concat(i,s,[{name:"Login",path:"/login",component:(0,r.lazy)((function(){return n.e(98).then(n.bind(n,6098))})),role:l.u.PUBLIC},{name:"Register",path:"/register",component:(0,r.lazy)((function(){return n.e(650).then(n.bind(n,6650))})),role:l.u.PUBLIC},{name:"404",path:null,component:(0,r.lazy)((function(){return n.e(138).then(n.bind(n,5738))})),role:l.u.NONE}]),m=n(4989);const f=function(e){var t=e.children;return r.createElement(r.Suspense,{fallback:r.createElement("span",{className:"flex h-3 w-3"},r.createElement("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-purple-400 opacity-75"}),r.createElement("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-purple-500"}))},t)};var p=n(1228),d=n(4322),h=n(6215),g=n(9120),E=n(8767),v=n(9189);function b(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(Boolean).join(" ")}const y=function(e){var t=e.routes,n=(0,c.TH)().pathname,a="/"===location.pathname[location.pathname.length-1]?location.pathname.slice(0,-1):location.pathname,l=t.some((function(e){if(e.path.includes(":")){var t=e.path.split("/"),r=a.split("/");if(t.length===r.length){for(var o=(e.path.match(/:/g)||[]).length,c=0,l=0;l<t.length;l++)r[l]!==t[l]&&c++;if(c===o)return!0}}return e.path===a||e.path===n})),s=(0,m.E)().logout,i=(0,E.useQuery)("user",v.Z.currentUserData),u=i.data,f=(i.isLoading,i.isError,[]),y={name:null==u?void 0:u.name,email:null==u?void 0:u.email,imageUrl:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80"};return l?r.createElement(r.Fragment,null,r.createElement(p.p,{as:"nav",className:"bg-gray-800"},(function(e){var n=e.open;return r.createElement(r.Fragment,null,r.createElement("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"},r.createElement("div",{className:"flex items-center justify-between h-16"},r.createElement("div",{className:"flex items-center"},r.createElement("div",{className:"flex-shrink-0"},r.createElement("img",{className:"h-8 w-8",src:"https://tailwindui.com/img/logos/workflow-mark-indigo-500.svg",alt:"Workflow"})),r.createElement("div",{className:"hidden md:block"},r.createElement("div",{className:"ml-10 flex items-baseline space-x-4"},t.map((function(e){if(e.display)return r.createElement(o.OL,{key:e.name,exact:!0,to:e.path,className:"px-3 py-2 rounded-md text-sm font-medium text-white hover:bg-gray-700 hover:text-white",activeClassName:"bg-gray-900"},e.name)}))))),r.createElement("div",{className:"hidden md:block"},r.createElement("div",{className:"ml-4 flex items-center md:ml-6"},r.createElement(d.v,{as:"div",className:"ml-3 relative"},r.createElement("div",null,r.createElement(d.v.Button,{className:"max-w-xs bg-gray-800 rounded-full flex items-center text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white"},r.createElement("span",{className:"sr-only"},"Open user menu"),r.createElement("img",{className:"h-8 w-8 rounded-full",src:y.imageUrl,alt:""}))),r.createElement(h.u,{as:r.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95"},r.createElement(d.v.Items,{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none"},f.map((function(e){return r.createElement(d.v.Item,{key:e.name},(function(t){var n=t.active;return r.createElement("a",{href:e.href,className:b(n?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700")},e.name)}))})),r.createElement(d.v.Item,null,r.createElement("button",{onClick:s,className:"w-full text-left block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100"},"Logout"))))))),r.createElement("div",{className:"-mr-2 flex md:hidden"},r.createElement(p.p.Button,{className:"bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white"},r.createElement("span",{className:"sr-only"},"Open main menu"),n?r.createElement(g.b0D,{className:"block h-6 w-6","aria-hidden":"true"}):r.createElement(g.Oqj,{className:"block h-6 w-6","aria-hidden":"true"}))))),r.createElement(p.p.Panel,{className:"md:hidden"},r.createElement("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3"},t.map((function(e){return r.createElement(o.OL,{key:e.name,exact:!0,to:e.path,className:"w-full flex px-3 py-2 rounded-md font-medium text-white hover:bg-gray-700 hover:text-white",activeClassName:"bg-gray-900"},e.name)}))),r.createElement("div",{className:"pt-4 pb-3 border-t border-gray-700"},r.createElement("div",{className:"flex items-center px-5"},r.createElement("div",{className:"flex-shrink-0"},r.createElement("img",{className:"h-10 w-10 rounded-full",src:y.imageUrl,alt:""})),r.createElement("div",{className:"ml-3"},r.createElement("div",{className:"text-base font-medium leading-none text-white"},y.name),r.createElement("div",{className:"text-sm font-medium leading-none text-gray-400"},y.email))),r.createElement("div",{className:"mt-3 px-2 space-y-1"},f.map((function(e){return r.createElement(p.p.Button,{key:e.name,as:"a",href:e.href,className:"block px-3 py-2 rounded-md text-base font-medium text-gray-400 hover:text-white hover:bg-gray-700"},e.name)}))))))})),r.createElement("header",{className:"bg-white shadow"},r.createElement("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8"},r.createElement("h1",{className:"text-3xl font-bold text-gray-900"},y.name)))):null};var N=n(7462),x=n(5987),w=["component","authenticated","role","pageRequiredRole"];const O=function(e){var t=e.component,n=e.authenticated,a=e.role,o=e.pageRequiredRole,s=(0,x.Z)(e,w);return r.createElement(c.AW,(0,N.Z)({},s,{render:function(e){return o===l.u.NONE?r.createElement(t,e):n&&a===l.u.STUDENT&&a!==o?r.createElement(c.l_,{to:"/"}):n&&a===l.u.TEACHER&&a!==o?r.createElement(c.l_,{to:"/admin"}):n||o===l.u.PUBLIC?r.createElement(t,e):r.createElement(c.l_,{to:"/login"})}}))};const k=function(){var e=(0,m.E)(),t=e.role,n=e.authenticated;return r.createElement("div",{className:"min-h-full bg-gray-50"},r.createElement(o.VK,null,n&&r.createElement(y,{routes:t===l.u.TEACHER?s:i}),r.createElement(f,null,r.createElement(c.rs,null,u.map((function(e){return r.createElement(O,{key:e.name,role:t,authenticated:n,pageRequiredRole:e.role,exact:!0,path:e.path,component:e.component})}))))))};var I=n(938);const S=function(){var e=new E.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,refetchOnmount:!1,refetchOnReconnect:!1,retry:!1}}});return r.createElement(E.QueryClientProvider,{client:e},r.createElement(m.H,null,r.createElement(k,null),r.createElement(I.ReactQueryDevtools,{initialIsOpen:!1})))};a.render(r.createElement(S,null),document.getElementById("app"))}},e=>{e.O(0,[568,990,386,624,578,616,852,698,805,711],(()=>{return t=8524,e(e.s=t);var t}));e.O()}]);